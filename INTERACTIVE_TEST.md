# 交互式测试指南

## 功能说明

测试脚本现在支持交互式输入，你可以在终端中直接输入：
- 🎯 专注主题（keywords）
- 🔗 当前网址（URL）
- 📄 页面标题（可选）
- 📝 页面内容片段（可选）

然后立即看到测试结果。

## 使用方法

### 步骤 1：启动本地服务器

**在终端 1 中运行：**
```bash
npm run local
```

保持服务器运行。

### 步骤 2：运行交互式测试

**在终端 2 中运行：**
```bash
npm run test:local
```

或者：
```bash
LOCAL_TEST=true node test-hybrid-strategy.js
```

### 步骤 3：按提示输入信息

测试脚本会依次提示你输入：

1. **🎯 专注主题 (keywords)**: 
   - 必填
   - 例如：`我在用Claude做一个vibecoding的项目`

2. **🔗 当前网址 (URL)**: 
   - 必填
   - 例如：`https://platform.openai.com/usage`

3. **📄 页面标题 (title)**: 
   - 可选，直接回车跳过
   - 例如：`Usage - OpenAI API`

4. **📝 页面内容片段 (content_snippet)**: 
   - 可选，直接回车跳过
   - 例如：`View your API usage and billing information...`

## 示例

```bash
$ npm run test:local

🔧 Using LOCAL API (http://localhost:3000)
   Make sure to run "npm run local" first!

============================================================
📝 请输入测试信息
============================================================

🎯 专注主题 (keywords): 我在用Claude做一个vibecoding的项目
🔗 当前网址 (URL): https://platform.openai.com/usage
📄 页面标题 (title, 可选，直接回车跳过): Usage - OpenAI API
📝 页面内容片段 (content_snippet, 可选，直接回车跳过): 

============================================================
🧪 开始测试
============================================================

测试用例:
  🎯 专注主题: 我在用Claude做一个vibecoding的项目
  📄 页面标题: Usage - OpenAI API
  🔗 网址: https://platform.openai.com/usage

📤 正在发送请求到 API...
============================================================
📥 API 响应结果:
============================================================

📊 相关性分数: 85%
🎯 状态: Stay
⏱️  响应时间: 3044ms

============================================================
📊 分析结果:
============================================================

✅ Fast Pass (高相关性) - 未调用 GPT
   → 页面与专注主题高度相关，建议保持专注

============================================================
💡 判断结果:
============================================================

✅ 建议: 保持专注 (Stay)
   该页面与你的专注主题相关，可以继续浏览

📝 原因: "该页面提供API使用和管理信息，对vibecoding项目的Claude使用非常相关。"

============================================================
✅ 测试完成
============================================================
```

## 测试结果说明

### 相关性分数

- **≥ 75%**: Fast Pass（高相关性）- 未调用 GPT，直接判断为相关
- **≤ 35%**: Fast Block（低相关性）- 未调用 GPT，直接判断为不相关
- **35% - 75%**: GPT 深度分析（模糊相关性）- 调用 GPT 进行深度分析

### 状态

- **Stay**: 建议保持专注，页面与专注主题相关
- **Block**: 建议阻止访问，页面与专注主题不相关

## 提示

- 如果 URL 格式不正确，会显示警告但继续测试
- 如果不输入页面标题，会自动从 URL 中提取域名作为标题
- 内容片段是可选的，但提供更多信息可能提高判断准确性

## 快速测试

如果你想快速测试，可以只输入专注主题和网址，其他字段直接回车跳过。

